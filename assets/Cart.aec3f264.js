import{L as I,z as m,C as L,D as w,r as i,o as x,b as A,p,d as g,e as C}from"./vendor.7c20991a.js";import{a as c}from"./index.03ddc5cf.js";import{C as O,F as S}from"./Form.a9cabf75.js";import{_ as U}from"./index.ad61d20f.js";const j={components:{Loading:I,Carts:O,Form:S},name:"Products",setup(){const n=m(!1),r=m(!0),l=m({}),a=L({loadingItem:""});w(async()=>{n.value=!0,o(),n.value=!1});const o=async()=>{try{const t=await c.cart.getCart();l.value=t.data}catch(t){alert(t.message)}};return{isLoading:n,fullPage:r,cart:l,loadingStatus:a,getCart:o,addToCart:async(t,e=1)=>{productModal.value.hide();try{a.loadingItem=t;const d={product_id:t,qty:e},y=await c.cart.addCart({data:d});alert(y.message),a.loadingItem="",o()}catch(d){alert(d.message)}},removeCartItem:async t=>{try{const e=await c.cart.removeCartItem(t);a.loadingItem=t,alert(e.message),a.loadingItem="",o()}catch(e){alert(e.message)}},removeCartAll:async()=>{try{const t=await c.cart.removeCartAll();alert(t.message),o()}catch(t){alert(t.message)}},updateCart:async t=>{try{a.loadingItem=t.id;const e={product_id:t.product_id,qty:t.qty},d=await c.cart.updateCart({data:e});alert(d.message),a.loadingItem="",o()}catch(e){a.loadingItem="",alert(e.message)}},createOrder:async t=>{n.value=!0;try{const e=await c.order.addOrder({data:t});alert(e.message),o(),n.value=!1}catch(e){a.loadingItem="",n.value=!1,alert(e.message)}}}}},F={class:"container"},R={class:"mt-4"},h={class:"my-5 row justify-content-center"};function B(n,r,l,a,o,f){const v=i("Loading"),u=i("Carts"),_=i("Form");return x(),A("div",F,[p("div",R,[g(" Loading "),C(v,{active:a.isLoading,"onUpdate:active":r[0]||(r[0]=s=>a.isLoading=s),"is-full-page":a.fullPage},null,8,["active","is-full-page"]),g(" \u8CFC\u7269\u8ECA\u5217\u8868 "),C(u,{cart:a.cart,"onUpdate:cart":r[1]||(r[1]=s=>a.cart=s),loadingStatus:a.loadingStatus,"onUpdate:loadingStatus":r[2]||(r[2]=s=>a.loadingStatus=s),onRemoveCartItem:a.removeCartItem,onRemoveCartAll:a.removeCartAll,onUpdateCart:a.updateCart},null,8,["cart","loadingStatus","onRemoveCartItem","onRemoveCartAll","onUpdateCart"])]),p("div",h,[g(" \u8868\u55AE "),C(_,{onCreateOrder:a.createOrder,cart:a.cart,"onUpdate:cart":r[3]||(r[3]=s=>a.cart=s)},null,8,["onCreateOrder","cart"])])])}var k=U(j,[["render",B],["__scopeId","data-v-77ef69c4"]]);export{k as default};
